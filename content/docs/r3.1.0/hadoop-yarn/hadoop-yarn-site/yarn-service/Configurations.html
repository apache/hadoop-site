<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--
 | Generated by Apache Maven Doxia at 2018-03-30
 | Rendered using Apache Maven Stylus Skin 1.5
-->
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>Apache Hadoop 3.1.0 &#x2013; </title>
    <style type="text/css" media="all">
      @import url("../css/maven-base.css");
      @import url("../css/maven-theme.css");
      @import url("../css/site.css");
    </style>
    <link rel="stylesheet" href="../css/print.css" type="text/css" media="print" />
        <meta name="Date-Revision-yyyymmdd" content="20180330" />
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
                </head>
  <body class="composite">
    <div id="banner">
                        <a href="https://hadoop.apache.org/" id="bannerLeft">
                                        <img src="https://hadoop.apache.org/images/hadoop-logo.jpg" alt="" />
                </a>
                              <a href="https://www.apache.org/" id="bannerRight">
                                        <img src="https://www.apache.org/images/asf_logo_wide.png" alt="" />
                </a>
            <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
            
                                   <div class="xleft">
                          <a href="https://www.apache.org/" class="externalLink">Apache</a>
        &gt;
                  <a href="https://hadoop.apache.org/" class="externalLink">Hadoop</a>
        &gt;
                  <a href="../../index.html">Apache Hadoop YARN</a>
        &gt;
                  <a href="../index.html">Apache Hadoop 3.1.0</a>
        &gt;
        
        </div>
            <div class="xright">            <a href="https://wiki.apache.org/hadoop" class="externalLink">Wiki</a>
            |
                <a href="https://git-wip-us.apache.org/repos/asf/hadoop.git" class="externalLink">git</a>
            |
                <a href="https://hadoop.apache.org/" class="externalLink">Apache Hadoop</a>
              
                                   &nbsp;| Last Published: 2018-03-30
              &nbsp;| Version: 3.1.0
            </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
             
                                                   <h5>General</h5>
                  <ul>
                  <li class="none">
                  <a href="../../../index.html">Overview</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-project-dist/hadoop-common/SingleCluster.html">Single Node Setup</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-project-dist/hadoop-common/ClusterSetup.html">Cluster Setup</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-project-dist/hadoop-common/CommandsManual.html">Commands Reference</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-project-dist/hadoop-common/FileSystemShell.html">FileSystem Shell</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-project-dist/hadoop-common/Compatibility.html">Compatibility Specification</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-project-dist/hadoop-common/DownstreamDev.html">Downstream Developer's Guide</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-project-dist/hadoop-common/AdminCompatibilityGuide.html">Admin Compatibility Guide</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-project-dist/hadoop-common/InterfaceClassification.html">Interface Classification</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-project-dist/hadoop-common/filesystem/index.html">FileSystem Specification</a>
            </li>
          </ul>
                       <h5>Common</h5>
                  <ul>
                  <li class="none">
                  <a href="../../../hadoop-project-dist/hadoop-common/CLIMiniCluster.html">CLI Mini Cluster</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-project-dist/hadoop-common/NativeLibraries.html">Native Libraries</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-project-dist/hadoop-common/Superusers.html">Proxy User</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-project-dist/hadoop-common/RackAwareness.html">Rack Awareness</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-project-dist/hadoop-common/SecureMode.html">Secure Mode</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-project-dist/hadoop-common/ServiceLevelAuth.html">Service Level Authorization</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-project-dist/hadoop-common/HttpAuthentication.html">HTTP Authentication</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-project-dist/hadoop-common/CredentialProviderAPI.html">Credential Provider API</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-kms/index.html">Hadoop KMS</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-project-dist/hadoop-common/Tracing.html">Tracing</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-project-dist/hadoop-common/UnixShellGuide.html">Unix Shell Guide</a>
            </li>
          </ul>
                       <h5>HDFS</h5>
                  <ul>
                  <li class="none">
                  <a href="../../../hadoop-project-dist/hadoop-hdfs/HdfsDesign.html">Architecture</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-project-dist/hadoop-hdfs/HdfsUserGuide.html">User Guide</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-project-dist/hadoop-hdfs/HDFSCommands.html">Commands Reference</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-project-dist/hadoop-hdfs/HDFSHighAvailabilityWithQJM.html">NameNode HA With QJM</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-project-dist/hadoop-hdfs/HDFSHighAvailabilityWithNFS.html">NameNode HA With NFS</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-project-dist/hadoop-hdfs/Federation.html">Federation</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-project-dist/hadoop-hdfs/ViewFs.html">ViewFs</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-project-dist/hadoop-hdfs/HdfsSnapshots.html">Snapshots</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-project-dist/hadoop-hdfs/HdfsEditsViewer.html">Edits Viewer</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-project-dist/hadoop-hdfs/HdfsImageViewer.html">Image Viewer</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-project-dist/hadoop-hdfs/HdfsPermissionsGuide.html">Permissions and HDFS</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-project-dist/hadoop-hdfs/HdfsQuotaAdminGuide.html">Quotas and HDFS</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-project-dist/hadoop-hdfs/LibHdfs.html">libhdfs (C API)</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-project-dist/hadoop-hdfs/WebHDFS.html">WebHDFS (REST API)</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-hdfs-httpfs/index.html">HttpFS</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-project-dist/hadoop-hdfs/ShortCircuitLocalReads.html">Short Circuit Local Reads</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-project-dist/hadoop-hdfs/CentralizedCacheManagement.html">Centralized Cache Management</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-project-dist/hadoop-hdfs/HdfsNfsGateway.html">NFS Gateway</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-project-dist/hadoop-hdfs/HdfsRollingUpgrade.html">Rolling Upgrade</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-project-dist/hadoop-hdfs/ExtendedAttributes.html">Extended Attributes</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-project-dist/hadoop-hdfs/TransparentEncryption.html">Transparent Encryption</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-project-dist/hadoop-hdfs/HdfsMultihoming.html">Multihoming</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-project-dist/hadoop-hdfs/ArchivalStorage.html">Storage Policies</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-project-dist/hadoop-hdfs/MemoryStorage.html">Memory Storage Support</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-project-dist/hadoop-hdfs/SLGUserGuide.html">Synthetic Load Generator</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-project-dist/hadoop-hdfs/HDFSErasureCoding.html">Erasure Coding</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-project-dist/hadoop-hdfs/HDFSDiskbalancer.html">Disk Balancer</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-project-dist/hadoop-hdfs/HdfsUpgradeDomain.html">Upgrade Domain</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-project-dist/hadoop-hdfs/HdfsDataNodeAdminGuide.html">DataNode Admin</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-project-dist/hadoop-hdfs-rbf/HDFSRouterFederation.html">Router Federation</a>
            </li>
          </ul>
                       <h5>MapReduce</h5>
                  <ul>
                  <li class="none">
                  <a href="../../../hadoop-mapreduce-client/hadoop-mapreduce-client-core/MapReduceTutorial.html">Tutorial</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-mapreduce-client/hadoop-mapreduce-client-core/MapredCommands.html">Commands Reference</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-mapreduce-client/hadoop-mapreduce-client-core/MapReduce_Compatibility_Hadoop1_Hadoop2.html">Compatibility with 1.x</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-mapreduce-client/hadoop-mapreduce-client-core/EncryptedShuffle.html">Encrypted Shuffle</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-mapreduce-client/hadoop-mapreduce-client-core/PluggableShuffleAndPluggableSort.html">Pluggable Shuffle/Sort</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-mapreduce-client/hadoop-mapreduce-client-core/DistributedCacheDeploy.html">Distributed Cache Deploy</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-mapreduce-client/hadoop-mapreduce-client-core/SharedCacheSupport.html">Support for YARN Shared Cache</a>
            </li>
          </ul>
                       <h5>MapReduce REST APIs</h5>
                  <ul>
                  <li class="none">
                  <a href="../../../hadoop-mapreduce-client/hadoop-mapreduce-client-core/MapredAppMasterRest.html">MR Application Master</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-mapreduce-client/hadoop-mapreduce-client-hs/HistoryServerRest.html">MR History Server</a>
            </li>
          </ul>
                       <h5>YARN</h5>
                  <ul>
                  <li class="none">
                  <a href="../../../hadoop-yarn/hadoop-yarn-site/YARN.html">Architecture</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-yarn/hadoop-yarn-site/YarnCommands.html">Commands Reference</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-yarn/hadoop-yarn-site/CapacityScheduler.html">Capacity Scheduler</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-yarn/hadoop-yarn-site/FairScheduler.html">Fair Scheduler</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-yarn/hadoop-yarn-site/ResourceManagerRestart.html">ResourceManager Restart</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-yarn/hadoop-yarn-site/ResourceManagerHA.html">ResourceManager HA</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-yarn/hadoop-yarn-site/ResourceModel.html">Resource Model</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-yarn/hadoop-yarn-site/NodeLabel.html">Node Labels</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-yarn/hadoop-yarn-site/WebApplicationProxy.html">Web Application Proxy</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-yarn/hadoop-yarn-site/TimelineServer.html">Timeline Server</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-yarn/hadoop-yarn-site/TimelineServiceV2.html">Timeline Service V.2</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-yarn/hadoop-yarn-site/WritingYarnApplications.html">Writing YARN Applications</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-yarn/hadoop-yarn-site/YarnApplicationSecurity.html">YARN Application Security</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-yarn/hadoop-yarn-site/NodeManager.html">NodeManager</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-yarn/hadoop-yarn-site/DockerContainers.html">Running Applications in Docker Containers</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-yarn/hadoop-yarn-site/NodeManagerCgroups.html">Using CGroups</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-yarn/hadoop-yarn-site/SecureContainer.html">Secure Containers</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-yarn/hadoop-yarn-site/registry/index.html">Registry</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-yarn/hadoop-yarn-site/ReservationSystem.html">Reservation System</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-yarn/hadoop-yarn-site/GracefulDecommission.html">Graceful Decommission</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-yarn/hadoop-yarn-site/OpportunisticContainers.html">Opportunistic Containers</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-yarn/hadoop-yarn-site/Federation.html">YARN Federation</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-yarn/hadoop-yarn-site/SharedCache.html">Shared Cache</a>
            </li>
          </ul>
                       <h5>YARN REST APIs</h5>
                  <ul>
                  <li class="none">
                  <a href="../../../hadoop-yarn/hadoop-yarn-site/WebServicesIntro.html">Introduction</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-yarn/hadoop-yarn-site/ResourceManagerRest.html">Resource Manager</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-yarn/hadoop-yarn-site/NodeManagerRest.html">Node Manager</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-yarn/hadoop-yarn-site/TimelineServer.html#Timeline_Server_REST_API_v1">Timeline Server</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-yarn/hadoop-yarn-site/TimelineServiceV2.html#Timeline_Service_v.2_REST_API">Timeline Service V.2</a>
            </li>
          </ul>
                       <h5>YARN Service</h5>
                  <ul>
                  <li class="none">
                  <a href="../../../hadoop-yarn/hadoop-yarn-site/yarn-service/Overview.html">Overview</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-yarn/hadoop-yarn-site/yarn-service/QuickStart.html">QuickStart</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-yarn/hadoop-yarn-site/yarn-service/Concepts.html">Concepts</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-yarn/hadoop-yarn-site/yarn-service/YarnServiceAPI.html">Yarn Service API</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-yarn/hadoop-yarn-site/yarn-service/ServiceDiscovery.html">Service Discovery</a>
            </li>
          </ul>
                       <h5>Hadoop Compatible File Systems</h5>
                  <ul>
                  <li class="none">
                  <a href="../../../hadoop-aliyun/tools/hadoop-aliyun/index.html">Aliyun OSS</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-aws/tools/hadoop-aws/index.html">Amazon S3</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-azure/index.html">Azure Blob Storage</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-azure-datalake/index.html">Azure Data Lake Storage</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-openstack/index.html">OpenStack Swift</a>
            </li>
          </ul>
                       <h5>Auth</h5>
                  <ul>
                  <li class="none">
                  <a href="../../../hadoop-auth/index.html">Overview</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-auth/Examples.html">Examples</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-auth/Configuration.html">Configuration</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-auth/BuildingIt.html">Building</a>
            </li>
          </ul>
                       <h5>Tools</h5>
                  <ul>
                  <li class="none">
                  <a href="../../../hadoop-streaming/HadoopStreaming.html">Hadoop Streaming</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-archives/HadoopArchives.html">Hadoop Archives</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-archive-logs/HadoopArchiveLogs.html">Hadoop Archive Logs</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-distcp/DistCp.html">DistCp</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-gridmix/GridMix.html">GridMix</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-rumen/Rumen.html">Rumen</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-resourceestimator/ResourceEstimator.html">Resource Estimator Service</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-sls/SchedulerLoadSimulator.html">Scheduler Load Simulator</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-project-dist/hadoop-common/Benchmarking.html">Hadoop Benchmarking</a>
            </li>
          </ul>
                       <h5>Reference</h5>
                  <ul>
                  <li class="none">
                  <a href="../../../hadoop-project-dist/hadoop-common/release/index.html">Changelog and Release Notes</a>
            </li>
                  <li class="none">
                  <a href="../../../api/index.html">Java API docs</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-project-dist/hadoop-common/UnixShellAPI.html">Unix Shell API</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-project-dist/hadoop-common/Metrics.html">Metrics</a>
            </li>
          </ul>
                       <h5>Configuration</h5>
                  <ul>
                  <li class="none">
                  <a href="../../../hadoop-project-dist/hadoop-common/core-default.xml">core-default.xml</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-project-dist/hadoop-hdfs/hdfs-default.xml">hdfs-default.xml</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-project-dist/hadoop-hdfs-rbf/hdfs-rbf-default.xml">hdfs-rbf-default.xml</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-mapreduce-client/hadoop-mapreduce-client-core/mapred-default.xml">mapred-default.xml</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-yarn/hadoop-yarn-common/yarn-default.xml">yarn-default.xml</a>
            </li>
                  <li class="none">
                  <a href="../../../hadoop-project-dist/hadoop-common/DeprecatedProperties.html">Deprecated Properties</a>
            </li>
          </ul>
                                 <a href="https://maven.apache.org/" title="Built by Maven" class="poweredBy">
          <img alt="Built by Maven" src="../images/logos/maven-feather.png"/>
        </a>
                       
                               </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <!---
  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

   https://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License. See accompanying LICENSE file.
-->
<p>This document describes how to configure the services to be deployed on YARN</p>
<p>There are mainly three types of configurations:</p>
<ul>

<li>The configurations specific to the custom service running on YARN . E.g. the hbase-site.xml for a Hbase service running on YARN.
<ul>

<li>It can be specified at both global service level(<tt>Service#configuration</tt>) or component level(<tt>Component#configuration</tt>).</li>
<li>Service-level configs are considered as the default configs for all components and component-level config can override service level config.</li>
<li>All config properties that uses constant variables as described below are subject to substitutions.</li>
</ul>
</li>
<li>The configurations specific to YARN service AM. (<tt>Configuration#properties</tt>).
<ul>

<li>E.g. The <tt>yarn.service.am-restart.max-attempts</tt> which controls how many times the framework AM can be retried if it fails. These configs are mainly to control the behavior of the framework AM , rather than the custom services launched by the framework.</li>
</ul>
</li>
<li>Some constants such as <tt>SERVICE_NAME</tt> for referring some system properties.
<ul>

<li>They are substituted by the service AM before writing the config files.</li>
</ul>
</li>
</ul>
<p>Below describes the details for each type of configurations.</p>
<div class="section">
<h2><a name="Configuration_for_custom_service"></a>Configuration for custom service</h2>
<p>Below is how a configuration object typically looks like:</p>

<div>
<div>
<pre class="source">&quot;configuration&quot; : {
    &quot;properties&quot; : {
        &quot;yarn.service.am-restart.max-attempts&quot; : 10  // config for the service AM
    },
    &quot;env&quot; : {                 // The environment variables to be exported when container gets launched
        &quot;env1&quot; : &quot;val1&quot;
    },
    &quot;files&quot; : [               // The list of configuration files to be mounted for the container
        {
            &quot;type&quot;: &quot;HADOOP_XML&quot;, // The format of the config file into which the &quot;properties&quot; are dumped
            &quot;dest_file&quot;: &quot;/etc/hadoop/conf/core-site.xml&quot;, // The location where the config file is mounted inside the container
            &quot;properties&quot; : {             // The list of key/value pairs to be dumped into the config file
                &quot;fs.defaultFS&quot; : &quot;hdfs://myhdfs&quot; // This property will be written into core-site.xml
            }
        },
        {
            &quot;type&quot;: &quot;HADOOP_XML&quot;,    // The format of the config file.
            &quot;src_file&quot; : &quot;&quot;hdfs://mycluster/tmp/conf/yarn-site.xml&quot;&quot;  // The location of the source config file to be downloaded
            &quot;dest_file&quot;: &quot;/etc/hadoop/conf/yarn-site.xml&quot;,            // The location where the config file will be mounted inside the container/
            &quot;properties&quot; : {
                &quot;yarn.resourcemanager.webapp.address&quot; : &quot;${COMPONENT_INSTANCE_NAME}.${SERVICE_NAME}.${USER}.${DOMAIN}&quot;  // Merge into (or override existing property in) yarn-site.xml
            }
        }
    ]
}
</pre></div></div>

<ul>

<li>properties: the configurations for service AM. Details below.</li>
<li>env :  the environment variables to be exported when container gets launched.</li>
<li>files :  The list of configuration files to be mounted inside the container.
<ul>

<li>type: The format of the config file(<tt>dest_file</tt>) to be mounted inside the container. If <tt>src_file</tt> is specified, it is also the format for both <tt>src_file</tt> and <tt>dest_file</tt>.</li>
<li>HADOOP_XML : the  hadoop xml format. If <tt>src_file</tt> is specified, the file content will be read as parsed in hadoop xml format.</li>
<li>XML : the standard xml format</li>
<li>JSON : the standard JSON format</li>
<li>YAML : the YAML format</li>
<li>PROPERTIES : the java PROPERTIES format</li>
<li>TEMPLATE : the plain text format. If <tt>src_file</tt> is specified, the content of the <tt>src_file</tt> will be written into <tt>dest_file</tt> post constant substitution. If <tt>src_file</tt> is not specified, use <tt>content</tt> as the key in <tt>properties</tt> field, and the value will be the actual content to be written in the <tt>dest_file</tt> post constant substitution. E.g

<div>
<div>
<pre class="source">{
    &quot;type&quot;: &quot;TEMPLATE&quot;
    &quot;dest_file&quot;: &quot;/etc/conf/hello&quot;
    &quot;properties&quot; : {
         &quot;content&quot; : &quot;Hello world&quot;
    }
}
</pre></div></div>

<p>The string <tt>Hello world</tt> will be written into a file located at <tt>/etc/conf/hello</tt> inside the container.</p></li>
<li>src_file : [optional], the source location of the config file at a network accessible location such as hdfs.</li>
<li>The format of both <tt>src_file</tt> and <tt>dest_file</tt> are defined by <tt>type</tt>.</li>
<li>Currently, It only works with <tt>HADOOP_XML</tt> and <tt>TEMPLATE</tt> type.</li>
<li>The <tt>src_file</tt> will be downloaded by YARN NodeManager and be mounted inside the container as in the location specified by <tt>dest_file</tt>.</li>
<li>If any properties specified in the <tt>properties</tt> field, they are added into (or overwriting existing properties in) the <tt>src_file</tt>.</li>
<li>If <tt>src_file</tt> is not specified, only the properties in the <tt>properties</tt> field will be written into the <tt>dest_file</tt> file.</li>
<li>dest_file : the location where the config file is mounted inside the container. The file format is defined by <tt>type</tt>. dest_file can be an absolute path or a relative path. If it&#x2019;s a relative path, the file will be located in the <tt>$PWD/conf</tt> directory (where <tt>$PWD</tt> is the container local directory which is mounted to all docker containers launched by YARN)</li>
<li>properties : The list of key/value pair configs to be written into the <tt>dest_file</tt> in the format as defined in <tt>type</tt>. If <tt>src_file</tt> is specified, these properties will be added into (or overwriting existing properties in) the <tt>src_file</tt>.</li>
</ul>
</li>
</ul></div>
<div class="section">
<h2><a name="Configuration_for_YARN_service_AM"></a>Configuration for YARN service AM</h2>
<p>This section describes the configurations for configuring the YARN service AM.</p>
<p>These can be specified either in the cluster <tt>yarn-site.xml</tt> at the global level or in the <tt>properties</tt> field of the <tt>Configuration</tt> object as per service basis like below:</p>

<div>
<div>
<pre class="source">{
    &quot;configuration&quot; : {
        &quot;properties&quot; : {
            &quot;yarn.service.am-restart.max-attempts&quot; : 10
        }
    }
}
</pre></div></div>

<p>Above config make the service AM to be retried at max 10 times.</p>
<div class="section">
<div class="section">
<h4><a name="Available_configurations:"></a>Available configurations:</h4>
<table border="0" class="bodyTable">
<thead>

<tr class="a">
<th> Name </th>
<th> Description </th></tr>
</thead><tbody>

<tr class="b">
<td>yarn.service.client-am.retry.max-wait-ms </td>
<td> the max retry time in milliseconds for the service client to talk to the service AM. By default, it is set to 0, which means no retry </td></tr>
<tr class="a">
<td>yarn.service.client-am.retry-interval-ms </td>
<td> the retry interval in milliseconds for the service client to talk to the service AM. By default, it is 2000, i.e. 2 seconds </td></tr>
<tr class="b">
<td>yarn.service.container-failure.retry.max </td>
<td> the max number of retries for the container to be auto restarted if it fails. By default, it is set to -1, which means forever.</td></tr>
<tr class="a">
<td>yarn.service.container-failure.retry-interval-ms</td>
<td> the retry interval in milliseconds for the container to be restarted. By default, it is 30000, i.e. 30 seconds </td></tr>
<tr class="b">
<td>yarn.service.am-restart.max-attempts</td>
<td> the max number of attempts for the framework AM</td></tr>
<tr class="a">
<td>yarn.service.am-resource.memory </td>
<td> the memory size in GB for the framework AM. By default, it is set to 1024</td></tr>
<tr class="b">
<td>yarn.service.queue </td>
<td> the default queue to which the service will be submitted. By default, it is submitted to <tt>default</tt> queue</td></tr>
<tr class="a">
<td>yarn.service.base.path </td>
<td> the root location for the service artifacts on hdfs for a user. By default, it is under ${user_home_dir}/.yarn/</td></tr>
<tr class="b">
<td>yarn.service.container-failure-per-component.threshold </td>
<td> the max number of container failures for a given component before the AM exits.</td></tr>
<tr class="a">
<td>yarn.service.node-blacklist.threshold </td>
<td> Maximum number of container failures on a node before the node is blacklisted by the AM</td></tr>
<tr class="b">
<td>yarn.service.failure-count-reset.window </td>
<td> The interval in seconds when the <tt>yarn.service.container-failure-per-component.threshold</tt> and <tt>yarn.service.node-blacklist.threshold</tt> gets reset. By default, it is 21600, i.e. 6 hours</td></tr>
<tr class="a">
<td>yarn.service.readiness-check-interval.seconds </td>
<td> The interval in seconds between readiness checks. By default, it is 30 seconds</td></tr>
<tr class="b">
<td>yarn.service.log.include-pattern</td>
<td> The regex expression for including log files whose file name matches it when aggregating the logs after the application completes.</td></tr>
<tr class="a">
<td>yarn.service.log.exclude-pattern</td>
<td> The regex expression for excluding log files whose file name matches it when aggregating the logs after the application completes. If the log file name matches both include and exclude pattern, this file will be excluded.</td></tr>
<tr class="b">
<td>yarn.service.rolling-log.include-pattern</td>
<td> The regex expression for including log files whose file name matches it when aggregating the logs while app is running.</td></tr>
<tr class="a">
<td>yarn.service.rolling-log.exclude-pattern</td>
<td> The regex expression for excluding log files whose file name matches it when aggregating the logs while app is running. If the log file name matches both include and exclude pattern, this file will be excluded.</td></tr>
<tr class="b">
<td>yarn.service.container-recovery.timeout.ms</td>
<td> The timeout in milliseconds after which the service AM releases all the containers of previous attempt which are not yet recovered by the RM. By default, it is set to 120000, i.e. 2 minutes.</td></tr>
</tbody>
</table></div></div></div>
<div class="section">
<h2><a name="Constant_variables_for_custom_service"></a>Constant variables for custom service</h2>
<p>The service framework provides some constant variables for user to configure their services. These variables are either dynamically generated by the system or are static ones such as service name defined by the user. User can use these constants in their configurations to be dynamically substituted by the service AM.E.g.</p>

<div>
<div>
<pre class="source">{
    &quot;type&quot; : &quot;HADOOP_XML&quot;,
    &quot;dest_file&quot; : &quot;/etc/hadoop/hbase-site.xml&quot;,
    &quot;properties&quot; : {
        &quot;hbase.regionserver.hostname&quot;: &quot;${COMPONENT_INSTANCE_NAME}.${SERVICE_NAME}.${USER}.${DOMAIN}&quot;
    }
}
</pre></div></div>

<p>Here, <tt>COMPONENT_INSTANCE_NAME</tt> and <tt>SERVICE_NAME</tt> are the constants to be substituted by the system.</p>
<p>Suppose the <tt>COMPONENT_INSTANCE_NAME</tt> is <tt>regionserver-0</tt> and <tt>SERVICE_NAME</tt> is defined by user as <tt>hbase</tt>, user name is <tt>devuser</tt> and domain name is <tt>dev.test</tt>. Then, the config will be substituted by the service AM and written in the config file <tt>/etc/hadoop/hbase-site.xml</tt> inside the container as below:</p>

<div>
<div>
<pre class="source">&lt;property&gt;
  &lt;name&gt;hbase.regionserver.hostname&lt;/name&gt;
  &lt;value&gt;regionserver-0.hbase.devuser.dev.test&lt;/value&gt;
&lt;/property&gt;
</pre></div></div>

<p>where <tt>regionserver-0</tt> is the actual component instance name assigned by the system for this container.</p>
<div class="section">
<div class="section">
<h4><a name="Available_constants:"></a>Available constants:</h4>
<table border="0" class="bodyTable">
<thead>

<tr class="a">
<th> Name </th>
<th> Description </th></tr>
</thead><tbody>

<tr class="b">
<td> SERVICE_NAME </td>
<td> name of the service defined by the user</td></tr>
<tr class="a">
<td> USER </td>
<td> user who submits the service. Note that user name which has &#x201c;_&#x201d; will be converted to use &#x201c;-&#x201d;, to conform with DNS hostname RFC format which doesn&#x2019;t allow &#x201c;_&#x201d;, and all characters will be lowercased E.g. &#x201c;Bob_dev&#x201d; will be converted to &#x201c;bob-dev&#x201d;  </td></tr>
<tr class="b">
<td> DOMAIN </td>
<td> the domain name for the cluster </td></tr>
<tr class="a">
<td> COMPONENT_NAME </td>
<td> the name for a given component </td></tr>
<tr class="b">
<td> COMPONENT_INSTANCE_NAME </td>
<td> the name for a given component instance (i.e. container) </td></tr>
<tr class="a">
<td> COMPONENT_ID </td>
<td> the monotonically increasing integer for a given component</td></tr>
<tr class="b">
<td> CONTAINER_ID </td>
<td> the YARN container Id for a given container </td></tr>
<tr class="a">
<td> ${COMPONENT_INSTANCE_NAME}_HOST </td>
<td> the hostname for a component instance (i.e. container), e.g. REGIONSERVER-0_HOST will be substituted by the actual hostname of the component instance. Note all characters must be uppercase. </td></tr>
<tr class="b">
<td> ${COMPONENT_INSTANCE_NAME}_IP </td>
<td> the ip for a component instance (i.e. container), e.g. REGIONSERVER-0_IP will be substituted by the actual IP address of the component instance. Note all characters must be uppercase. </td></tr>
<tr class="a">
<td> CLUSTER_FS_URI </td>
<td> the URI of the cluster hdfs </td></tr>
</tbody>
</table></div></div></div>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
        &#169;            2008-2018
              Apache Software Foundation
            
                          - <a href="https://maven.apache.org/privacy-policy.html">Privacy Policy</a>.
        Apache Maven, Maven, Apache, the Apache feather logo, and the Apache Maven project logos are trademarks of The Apache Software Foundation.
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
