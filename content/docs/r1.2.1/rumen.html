<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta content="Apache Forrest" name="Generator">
<meta name="Forrest-version" content="0.9">
<meta name="Forrest-skin-name" content="pelt">
<title>Rumen</title>
<link type="text/css" href="skin/basic.css" rel="stylesheet">
<link media="screen" type="text/css" href="skin/screen.css" rel="stylesheet">
<link media="print" type="text/css" href="skin/print.css" rel="stylesheet">
<link type="text/css" href="skin/profile.css" rel="stylesheet">
<script src="skin/getBlank.js" language="javascript" type="text/javascript"></script><script src="skin/getMenu.js" language="javascript" type="text/javascript"></script><script src="skin/fontsize.js" language="javascript" type="text/javascript"></script>
<link rel="shortcut icon" href="images/favicon.ico">
</head>
<body onload="init()">
<script type="text/javascript">ndeSetTextSize();</script>
<div id="top">
<!--+
    |breadtrail
    +-->
<div class="breadtrail">
<a href="http://www.apache.org/">Apache</a> &gt; <a href="http://hadoop.apache.org/">Hadoop</a> &gt; <a href="http://hadoop.apache.org/core/">Core</a><script src="skin/breadcrumbs.js" language="JavaScript" type="text/javascript"></script>
</div>
<!--+
    |header
    +-->
<div class="header">
<!--+
    |start group logo
    +-->
<div class="grouplogo">
<a href="http://hadoop.apache.org/"><img class="logoImage" alt="Hadoop" src="images/hadoop-logo.jpg" title="Apache Hadoop"></a>
</div>
<!--+
    |end group logo
    +-->
<!--+
    |start Project Logo
    +-->
<div class="projectlogo">
<a href="http://hadoop.apache.org/core/"><img class="logoImage" alt="Hadoop" src="images/hadoop-logo-2.gif" title="Scalable Computing Platform"></a>
</div>
<!--+
    |end Project Logo
    +-->
<!--+
    |start Search
    +-->
<div class="searchbox">
<form action="http://www.google.com/search" method="get" class="roundtopsmall">
<input value="hadoop.apache.org" name="sitesearch" type="hidden"><input onFocus="getBlank (this, 'Search the site with google');" size="25" name="q" id="query" type="text" value="Search the site with google">&nbsp; 
                    <input name="Search" value="Search" type="submit">
</form>
</div>
<!--+
    |end search
    +-->
<!--+
    |start Tabs
    +-->
<ul id="tabs">
<li>
<a class="unselected" href="http://hadoop.apache.org/core/">Project</a>
</li>
<li>
<a class="unselected" href="http://wiki.apache.org/hadoop">Wiki</a>
</li>
<li class="current">
<a class="selected" href="index.html">Hadoop 1.2.1 Documentation</a>
</li>
</ul>
<!--+
    |end Tabs
    +-->
</div>
</div>
<div id="main">
<div id="publishedStrip">
<!--+
    |start Subtabs
    +-->
<div id="level2tabs"></div>
<!--+
    |end Endtabs
    +-->
<script type="text/javascript"><!--
document.write("Last Published: " + document.lastModified);
//  --></script>
</div>
<!--+
    |breadtrail
    +-->
<div class="breadtrail">

             &nbsp;
           </div>
<!--+
    |start Menu, mainarea
    +-->
<!--+
    |start Menu
    +-->
<div id="menu">
<div onclick="SwitchMenu('menu_1.1', 'skin/')" id="menu_1.1Title" class="menutitle">Getting Started</div>
<div id="menu_1.1" class="menuitemgroup">
<div class="menuitem">
<a href="index.html">Overview</a>
</div>
<div class="menuitem">
<a href="single_node_setup.html">Single Node Setup</a>
</div>
<div class="menuitem">
<a href="cluster_setup.html">Cluster Setup</a>
</div>
<div class="menuitem">
<a href="cli_minicluster.html">CLI MiniCluster</a>
</div>
</div>
<div onclick="SwitchMenu('menu_1.2', 'skin/')" id="menu_1.2Title" class="menutitle">Guides</div>
<div id="menu_1.2" class="menuitemgroup">
<div class="menuitem">
<a href="HttpAuthentication.html">Authentication for Hadoop HTTP web-consoles</a>
</div>
</div>
<div onclick="SwitchMenu('menu_selected_1.3', 'skin/')" id="menu_selected_1.3Title" class="menutitle" style="background-image: url('skin/images/chapter_open.gif');">MapReduce</div>
<div id="menu_selected_1.3" class="selectedmenuitemgroup" style="display: block;">
<div class="menuitem">
<a href="mapred_tutorial.html">MapReduce Tutorial</a>
</div>
<div class="menuitem">
<a href="streaming.html">Hadoop Streaming</a>
</div>
<div class="menuitem">
<a href="commands_manual.html">Hadoop Commands</a>
</div>
<div class="menuitem">
<a href="distcp.html">DistCp</a>
</div>
<div class="menuitem">
<a href="distcp2.html">DistCp Version 2</a>
</div>
<div class="menuitem">
<a href="vaidya.html">Vaidya</a>
</div>
<div class="menuitem">
<a href="hadoop_archives.html">Hadoop Archives</a>
</div>
<div class="menuitem">
<a href="gridmix.html">Gridmix</a>
</div>
<div class="menupage">
<div class="menupagetitle">Rumen</div>
</div>
<div class="menuitem">
<a href="capacity_scheduler.html">Capacity Scheduler</a>
</div>
<div class="menuitem">
<a href="fair_scheduler.html">Fair Scheduler</a>
</div>
<div class="menuitem">
<a href="hod_scheduler.html">Hod Scheduler</a>
</div>
</div>
<div onclick="SwitchMenu('menu_1.4', 'skin/')" id="menu_1.4Title" class="menutitle">HDFS</div>
<div id="menu_1.4" class="menuitemgroup">
<div class="menuitem">
<a href="hdfs_user_guide.html">HDFS Users </a>
</div>
<div class="menuitem">
<a href="hdfs_design.html">HDFS Architecture</a>
</div>
<div class="menuitem">
<a href="hdfs_permissions_guide.html">Permissions</a>
</div>
<div class="menuitem">
<a href="hdfs_quota_admin_guide.html">Quotas</a>
</div>
<div class="menuitem">
<a href="SLG_user_guide.html">Synthetic Load Generator</a>
</div>
<div class="menuitem">
<a href="hdfs_imageviewer.html">Offline Image Viewer</a>
</div>
<div class="menuitem">
<a href="hftp.html">HFTP</a>
</div>
<div class="menuitem">
<a href="webhdfs.html">WebHDFS REST API</a>
</div>
<div class="menuitem">
<a href="libhdfs.html">C API libhdfs</a>
</div>
</div>
<div onclick="SwitchMenu('menu_1.5', 'skin/')" id="menu_1.5Title" class="menutitle">Common</div>
<div id="menu_1.5" class="menuitemgroup">
<div class="menuitem">
<a href="deployment_layout.html">Deployment Layout</a>
</div>
<div class="menuitem">
<a href="file_system_shell.html">File System Shell</a>
</div>
<div class="menuitem">
<a href="service_level_auth.html">Service Level Authorization</a>
</div>
<div class="menuitem">
<a href="native_libraries.html">Native Libraries</a>
</div>
</div>
<div onclick="SwitchMenu('menu_1.6', 'skin/')" id="menu_1.6Title" class="menutitle">Miscellaneous</div>
<div id="menu_1.6" class="menuitemgroup">
<div class="menuitem">
<a href="Secure_Impersonation.html">Secure Impersonation</a>
</div>
<div class="menuitem">
<a href="api/index.html">API Docs</a>
</div>
<div class="menuitem">
<a href="jdiff/changes.html">API Changes</a>
</div>
<div class="menuitem">
<a href="http://wiki.apache.org/hadoop/">Wiki</a>
</div>
<div class="menuitem">
<a href="http://wiki.apache.org/hadoop/FAQ">FAQ</a>
</div>
<div class="menuitem">
<a href="releasenotes.html">Release Notes</a>
</div>
<div class="menuitem">
<a href="changes.html">Change Log</a>
</div>
</div>
<div id="credit"></div>
<div id="roundbottom">
<img style="display: none" class="corner" height="15" width="15" alt="" src="skin/images/rc-b-l-15-1body-2menu-3menu.png"></div>
<!--+
  |alternative credits
  +-->
<div id="credit2"></div>
</div>
<!--+
    |end Menu
    +-->
<!--+
    |start content
    +-->
<div id="content">
<div title="Portable Document Format" class="pdflink">
<a class="dida" href="rumen.pdf"><img alt="PDF -icon" src="skin/images/pdfdoc.gif" class="skin"><br>
        PDF</a>
</div>
<h1>Rumen</h1>
<div id="front-matter">
<div id="minitoc-area">
<ul class="minitoc">
<li>
<a href="#overview">Overview</a>
<ul class="minitoc">
<li>
<a href="#Motivation">Motivation</a>
</li>
<li>
<a href="#Components">Components</a>
</li>
</ul>
</li>
<li>
<a href="#usage">How to use Rumen?</a>
<ul class="minitoc">
<li>
<a href="#Trace+Builder">Trace Builder</a>
<ul class="minitoc">
<li>
<a href="#Example">Example</a>
</li>
</ul>
</li>
<li>
<a href="#Folder">Folder</a>
<ul class="minitoc">
<li>
<a href="#Examples">Examples</a>
</li>
</ul>
</li>
</ul>
</li>
<li>
<a href="#Appendix">Appendix</a>
<ul class="minitoc">
<li>
<a href="#Resources">Resources</a>
</li>
<li>
<a href="#Dependencies">Dependencies</a>
</li>
</ul>
</li>
</ul>
</div>
</div>
  <!--
    Overview [What is Rumen and why is it needed?]
  -->
  
<a name="overview"></a>
<h2 class="h3">Overview</h2>
<div class="section">
<p>
<em>Rumen</em> is a data extraction and analysis tool built for
       <em>Apache Hadoop</em>. <em>Rumen</em> mines <em>JobHistory</em> logs to 
       extract meaningful data and stores it in an easily-parsed, condensed 
       format or <em>digest</em>. The raw trace data from MapReduce logs are 
       often insufficient for simulation, emulation, and benchmarking, as these 
       tools often attempt to measure conditions that did not occur in the 
       source data. For example, if a task ran locally in the raw trace data 
       but a simulation of the scheduler elects to run that task on a remote 
       rack, the simulator requires a runtime its input cannot provide. 
       To fill in these gaps, Rumen performs a statistical analysis of the 
       digest to estimate the variables the trace doesn't supply. Rumen traces 
       drive both Gridmix (a benchmark of Hadoop MapReduce clusters) and Mumak 
       (a simulator for the JobTracker).
    </p>
<a name="Motivation"></a>
<h3 class="h4">Motivation</h3>
<ul>
        
<li>Extracting meaningful data from <em>JobHistory</em> logs is a common
            task for any tool built to work on <em>MapReduce</em>. It 
            is tedious to write a custom tool which is so tightly coupled with 
            the <em>MapReduce</em> framework. Hence there is a need for a 
            built-in tool for performing framework level task of log parsing and
            analysis. Such a tool would insulate external systems depending on 
            job history against the changes made to the job history format.
        </li>
        
<li>Performing statistical analysis of various attributes of a 
            <em>MapReduce Job</em> such as <em>task runtimes, task failures 
            etc</em> is another common task that the benchmarking 
            and simulation tools might need. <em>Rumen</em> generates 
            <a href="http://en.wikipedia.org/wiki/Cumulative_distribution_function">
              <em>Cumulative Distribution Functions (CDF)</em>
            </a> for the Map/Reduce task runtimes. 
            Runtime CDF can be used for extrapolating the task runtime of 
            incomplete, missing and synthetic tasks. Similarly CDF is also 
            computed for the total number of successful tasks for every attempt.
            
        </li>
      
</ul>
<a name="Components"></a>
<h3 class="h4">Components</h3>
<p>
<em>Rumen</em> consists of 2 components</p>
<ul>
        
<li>
<em>Trace Builder</em> : 
            Converts <em>JobHistory</em> logs into an easily-parsed format.
            Currently <span class="codefrag">TraceBuilder</span> outputs the trace in 
            <a href="http://www.json.org/"><em>JSON</em></a> 
            format.   
        </li>
        
<li>
<em>Folder </em>: 
            A utility to scale the input trace. A trace obtained from
            <em>TraceBuilder</em> simply summarizes the jobs in the 
            input folders and files. The time-span within which all the jobs in 
            a given trace finish can be considered as the trace runtime. 
            <em>Folder</em> can be used to scale the runtime of a trace.
            Decreasing the trace runtime might involve dropping some jobs from 
            the input trace and scaling down the runtime of remaining jobs. 
            Increasing the trace runtime might involve adding some dummy jobs to
            the resulting trace and scaling up the runtime of individual jobs.
       </li>
                 
      
</ul>
<p></p>
<p></p>
<p></p>
</div>    

  <!--
    Usage [How to run Rumen? What are the various configuration parameters?]
  -->
  
<a name="usage"></a>
<h2 class="h3">How to use Rumen?</h2>
<div class="section">
<p>Converting <em>JobHistory</em> logs into a desired job-trace consists of 
       2 steps</p>
<ol>
      
<li>Extracting information into an intermediate format</li>
      
<li>Adjusting the job-trace obtained from the intermediate trace to 
          have the desired properties.</li>
    
</ol>
<div class="note">
<div class="label">Note</div>
<div class="content">Extracting information from <em>JobHistory</em> logs is a one time
          operation. This so called <em>Gold Trace</em> can be reused to
          generate traces with desired values of properties such as 
          <span class="codefrag">output-duration</span>, <span class="codefrag">concentration</span> etc.
    </div>
</div>
<p>
<em>Rumen</em> provides 2 basic commands</p>
<ul>
       
<li>
<span class="codefrag">TraceBuilder</span>
</li>
       
<li>
<span class="codefrag">Folder</span>
</li>
     
</ul>
<p>Firstly, we need to generate the <em>Gold Trace</em>. Hence the first 
       step is to run <span class="codefrag">TraceBuilder</span> on a job-history folder. 
       The output of the <span class="codefrag">TraceBuilder</span> is a job-trace file (and an 
       optional cluster-topology file). In case we want to scale the output, we 
       can use the <span class="codefrag">Folder</span> utility to fold the current trace to the 
       desired length. The remaining part of this section explains these 
       utilities in detail.
    </p>
<div class="note">
<div class="label">Note</div>
<div class="content">Examples in this section assumes that certain libraries are present 
          in the java CLASSPATH. See <em>Section-3.2</em> for more details.
    </div>
</div>
<a name="Trace+Builder"></a>
<h3 class="h4">Trace Builder</h3>
<p>
<span class="codefrag">Command:</span>
</p>
<pre class="code">java org.apache.hadoop.tools.rumen.TraceBuilder [options] &lt;jobtrace-output&gt; &lt;topology-output&gt; &lt;inputs&gt;</pre>
<p>This command invokes the <span class="codefrag">TraceBuilder</span> utility of
         <em>Rumen</em>. It converts the JobHistory files into a series of JSON
         objects and writes them into the <span class="codefrag">&lt;jobtrace-output&gt;</span>
         file. It also extracts the cluster layout (topology) and writes it in
         the<span class="codefrag">&lt;topology-output&gt;</span> file.
         <span class="codefrag">&lt;inputs&gt;</span> represents a space-separated list of
         JobHistory files and folders.
      </p>
<div class="note">
<div class="label">Note</div>
<div class="content">1) Input and output to <span class="codefrag">TraceBuilder</span> is expected to
               be a fully qualified FileSystem path. So use '<em>file://</em>' 
               to specify files on the <span class="codefrag">local</span> FileSystem and 
               '<em>hdfs://</em>' to specify files on HDFS. Since input files or
               folder are FileSystem paths, it means that they can be globbed.
               This can be useful while specifying multiple file paths using
               regular expressions.
         </div>
</div>
<div class="note">
<div class="label">Note</div>
<div class="content">
               2) By default, TraceBuilder does not recursively scan the input
               folder for job history files. Only the files that are directly
               placed under the input folder will be considered for generating
               the trace. To add all the files under the input directory by
               recursively scanning the input directory, use &lsquo;-recursive&rsquo;
               option.
         </div>
</div>
<p>Cluster topology is used as follows :</p>
<ul>
        
<li>To reconstruct the splits and make sure that the 
            distances/latencies seen in the actual run are modeled correctly.
        </li>
        
<li>To extrapolate splits information for tasks with missing splits
            details or synthetically generated tasks.
        </li>
      
</ul>
<p>
<span class="codefrag">Options :</span>
</p>
<table class="ForrestTable" cellspacing="1" cellpadding="4">
        
<tr>
          
<th colspan="1" rowspan="1"> Parameter</th>
          <th colspan="1" rowspan="1"> Description</th>
          <th colspan="1" rowspan="1"> Notes </th>
        
</tr>
        
<tr>
          
<td colspan="1" rowspan="1"><span class="codefrag">-demuxer</span></td>
          <td colspan="1" rowspan="1">Used to read the jobhistory files. The default is 
              <span class="codefrag">DefaultInputDemuxer</span>.</td>
          <td colspan="1" rowspan="1">Demuxer decides how the input file maps to jobhistory file(s). 
              Job history logs and job configuration files are typically small 
              files, and can be more effectively stored when embedded in some
              container file format like SequenceFile or TFile. To support such 
              usage cases, one can specify a customized Demuxer class that can 
              extract individual job history logs and job configuration files 
              from the source files.
          </td>
        
</tr>
        
<tr>
           
<td colspan="1" rowspan="1"><span class="codefrag">-recursive</span></td>
           <td colspan="1" rowspan="1">Recursively traverse input paths for job history logs.</td>
           <td colspan="1" rowspan="1">This option should be used to inform the TraceBuilder to
           recursively scan the input paths and process all the files under it.
           Note that, by default, only the history logs that are directly under
           the input folder are considered for generating the trace.
           </td>
        
</tr>
      
</table>
<a name="Example"></a>
<h4>Example</h4>
<pre class="code">java org.apache.hadoop.tools.rumen.TraceBuilder file:///home/user/job-trace.json file:///home/user/topology.output file:///home/user/logs/history/done</pre>
<p></p>
<p>This will analyze all the jobs in 
         <span class="codefrag">/home/user/logs/history/done</span> stored on the 
         <span class="codefrag">local</span> FileSystem and output the jobtraces in 
         <span class="codefrag">/home/user/job-trace.json</span> along with topology 
         information in <span class="codefrag">/home/user/topology.output</span>.
        </p>
<p></p>
<p></p>
<p></p>
<p></p>
<p></p>
<p></p>
<a name="Folder"></a>
<h3 class="h4">Folder</h3>
<p>
<span class="codefrag">Command</span>:</p>
<pre class="code">java org.apache.hadoop.tools.rumen.Folder [options] [input] [output]</pre>
<div class="note">
<div class="label">Note</div>
<div class="content">Input and output to <span class="codefrag">Folder</span> is expected to be a fully 
            qualified FileSystem path. So use '<em>file://</em>' to specify 
            files on the <span class="codefrag">local</span> FileSystem and '<em>hdfs://</em>' to
            specify files on HDFS.
         </div>
</div>
<p>This command invokes the <span class="codefrag">Folder</span> utility of 
         <em>Rumen</em>. Folding essentially means that the output duration of 
         the resulting trace is fixed and job timelines are adjusted 
         to respect the final output duration. 
      </p>
<p></p>
<p>
<span class="codefrag">Options :</span>
</p>
<table class="ForrestTable" cellspacing="1" cellpadding="4">
        
<tr>
          
<th colspan="1" rowspan="1"> Parameter</th>
          <th colspan="1" rowspan="1"> Description</th>
          <th colspan="1" rowspan="1"> Notes </th>
        
</tr>
        
<tr>
          
<td colspan="1" rowspan="1"><span class="codefrag">-input-cycle</span></td>
          <td colspan="1" rowspan="1">Defines the basic unit of time for the folding operation. There is
              no default value for <span class="codefrag">input-cycle</span>. 
              <strong>Input cycle must be provided</strong>.
          </td>
          <td colspan="1" rowspan="1">'<span class="codefrag">-input-cycle 10m</span>' 
              implies that the whole trace run will be now sliced at a 10min 
              interval. Basic operations will be done on the 10m chunks. Note 
              that <em>Rumen</em> understands various time units like 
              <em>m(min), h(hour), d(days) etc</em>.
          </td>
        
</tr>
        
<tr>
          
<td colspan="1" rowspan="1"><span class="codefrag">-output-duration</span></td>
          <td colspan="1" rowspan="1">This parameter defines the final runtime of the trace. 
              Default value if <strong>1 hour</strong>.
          </td>
          <td colspan="1" rowspan="1">'<span class="codefrag">-output-duration 30m</span>' 
              implies that the resulting trace will have a max runtime of 
              30mins. All the jobs in the input trace file will be folded and 
              scaled to fit this window.
          </td>
        
</tr>
        
<tr>
          
<td colspan="1" rowspan="1"><span class="codefrag">-concentration</span></td>
          <td colspan="1" rowspan="1">Set the concentration of the resulting trace. Default value is 
              <strong>1</strong>.
          </td>
          <td colspan="1" rowspan="1">If the total runtime of the resulting trace is less than the total
              runtime of the input trace, then the resulting trace would contain
              lesser number of jobs as compared to the input trace. This 
              essentially means that the output is diluted. To increase the 
              density of jobs, set the concentration to a higher value.</td>
        
</tr>
        
<tr>
          
<td colspan="1" rowspan="1"><span class="codefrag">-debug</span></td>
          <td colspan="1" rowspan="1">Run the Folder in debug mode. By default it is set to 
              <strong>false</strong>.</td>
          <td colspan="1" rowspan="1">In debug mode, the Folder will print additional statements for 
              debugging. Also the intermediate files generated in the scratch 
              directory will not be cleaned up.
          </td>
        
</tr>
        
<tr>
          
<td colspan="1" rowspan="1"><span class="codefrag">-seed</span></td>
          <td colspan="1" rowspan="1">Initial seed to the Random Number Generator. By default, a Random 
              Number Generator is used to generate a seed and the seed value is
              reported back to the user for future use.
          </td>
          <td colspan="1" rowspan="1">If an initial seed is passed, then the <span class="codefrag">Random Number 
              Generator</span> will generate the random numbers in the same 
              sequence i.e the sequence of random numbers remains same if the 
              same seed is used. Folder uses Random Number Generator to decide 
              whether or not to emit the job. 
          </td>
        
</tr>
        
<tr>
          
<td colspan="1" rowspan="1"><span class="codefrag">-temp-directory</span></td>
          <td colspan="1" rowspan="1">Temporary directory for the Folder. By default the <strong>output
              folder's parent directory</strong> is used as the scratch space.
          </td>
          <td colspan="1" rowspan="1">This is the scratch space used by Folder.  All the 
              temporary files are cleaned up in the end unless the Folder is run
              in <span class="codefrag">debug</span> mode.</td>
        
</tr>
        
<tr>
          
<td colspan="1" rowspan="1"><span class="codefrag">-skew-buffer-length</span></td>
          <td colspan="1" rowspan="1">Enables <em>Folder</em> to tolerate skewed jobs.
              The default buffer length is <strong>0</strong>.</td>
          <td colspan="1" rowspan="1">'<span class="codefrag">-skew-buffer-length 100</span>' 
              indicates that if the jobs appear out of order within a window 
              size of 100, then they will be emitted in-order by the folder. 
              If a job appears out-of-order outside this window, then the Folder
              will bail out provided <span class="codefrag">-allow-missorting</span> is not set.
              <em>Folder</em> reports the maximum skew size seen in the 
              input trace for future use.
          </td>
        
</tr>
        
<tr>
          
<td colspan="1" rowspan="1"><span class="codefrag">-allow-missorting</span></td>
          <td colspan="1" rowspan="1">Enables <em>Folder</em> to tolerate out-of-order jobs. By default 
              mis-sorting is not allowed.
          </td>
          <td colspan="1" rowspan="1">If mis-sorting is allowed, then the <em>Folder</em> will ignore 
              out-of-order jobs that cannot be deskewed using a skew buffer of
              size specified using <span class="codefrag">-skew-buffer-length</span>. If 
              mis-sorting is not allowed, then the Folder will bail out if the
              skew buffer is incapable of tolerating the skew.
          </td>
        
</tr>
      
</table>
<a name="Examples"></a>
<h4>Examples</h4>
<a name="Folding+an+input+trace+with+10+hours+of+total+runtime+to+%0A+++++++++++++++generate+an+output+trace+with+1+hour+of+total+runtime"></a>
<h5>Folding an input trace with 10 hours of total runtime to 
               generate an output trace with 1 hour of total runtime</h5>
<pre class="code">java org.apache.hadoop.tools.rumen.Folder -output-duration 1h  -input-cycle 20m  file:///home/user/job-trace.json file:///home/user/job-trace-1hr.json</pre>
<p></p>
<p>If the folded jobs are out of order then the command
          will bail out. 
        </p>
<p>
        
        
</p>
<a name="Folding+an+input+trace+with+10+hours+of+total+runtime+to+%0A+++++++++++++++generate+an+output+trace+with+1+hour+of+total+runtime+and+%0A+++++++++++++++tolerate+some+skewness"></a>
<h5>Folding an input trace with 10 hours of total runtime to 
               generate an output trace with 1 hour of total runtime and 
               tolerate some skewness
        </h5>
<pre class="code">java org.apache.hadoop.tools.rumen.Folder -output-duration 1h -input-cycle 20m  -allow-missorting -skew-buffer-length 100 file:///home/user/job-trace.json file:///home/user/job-trace-1hr.json</pre>
<p></p>
<p>If the folded jobs are out of order, then atmost
          100 jobs will be de-skewed. If the 101<sup>st</sup> job is 
          <em>out-of-order</em>, then the command will bail out.
        </p>
<a name="Folding+an+input+trace+with+10+hours+of+total+runtime+to+%0A+++++++++++++++generate+an+output+trace+with+1+hour+of+total+runtime+in+debug+%0A+++++++++++++++mode"></a>
<h5>Folding an input trace with 10 hours of total runtime to 
               generate an output trace with 1 hour of total runtime in debug 
               mode
        </h5>
<pre class="code">java org.apache.hadoop.tools.rumen.Folder -output-duration 1h -input-cycle 20m  -debug -temp-directory file:///tmp/debug file:///home/user/job-trace.json file:///home/user/job-trace-1hr.json</pre>
<p></p>
<p>This will fold the 10hr job-trace file 
           <span class="codefrag">file:///home/user/job-trace.json</span> to finish within 1hr 
           and use <span class="codefrag">file:///tmp/debug</span> as the temporary directory. 
           The intermediate files in the temporary directory will not be cleaned
           up.
        </p>
<a name="Folding+an+input+trace+with+10+hours+of+total+runtime+to+%0A+++++++++++++++generate+an+output+trace+with+1+hour+of+total+runtime+with+custom%0A+++++++++++++++concentration."></a>
<h5>Folding an input trace with 10 hours of total runtime to 
               generate an output trace with 1 hour of total runtime with custom
               concentration.
        </h5>
<pre class="code">java org.apache.hadoop.tools.rumen.Folder -output-duration 1h -input-cycle 20m  -concentration 2  file:///home/user/job-trace.json file:///home/user/job-trace-1hr.json</pre>
<p></p>
<p>This will fold the 10hr job-trace file 
           <span class="codefrag">file:///home/user/job-trace.json</span> to finish within 1hr 
           with concentration of 2. <span class="codefrag">Example-2.3.2</span> will retain 10% 
           of the jobs. With <em>concentration</em> as 2, 20% of the total input 
           jobs will be retained.
        </p>
<p></p>
<p></p>
<p></p>
</div>
  
  <!--
    Appendix [Resources i.e ppts, jiras, definition etc]
  -->
  
<a name="Appendix"></a>
<h2 class="h3">Appendix</h2>
<div class="section">
<a name="Resources"></a>
<h3 class="h4">Resources</h3>
<p>
<a href="https://issues.apache.org/jira/browse/MAPREDUCE-751">MAPREDUCE-751</a> is the main JIRA that introduced <em>Rumen</em> to <em>MapReduce</em>. 
         Look at the MapReduce <a href="https://issues.apache.org/jira/browse/MAPREDUCE/component/12313617">rumen-component</a> for further details.</p>
<a name="Dependencies"></a>
<h3 class="h4">Dependencies</h3>
<p>
<em>Rumen</em> expects certain library <em>JARs</em> to be present in 
         the <em>CLASSPATH</em>. 
              The required libraries are </p>
<ul>
        
<li>
<span class="codefrag">Hadoop MapReduce Tools</span> (<span class="codefrag">hadoop-mapred-tools-{hadoop-version}.jar</span>)</li>
        
<li>
<span class="codefrag">Hadoop Common</span> (<span class="codefrag">hadoop-common-{hadoop-version}.jar</span>)</li>
        
<li>
<span class="codefrag">Apache Commons Logging</span> (<span class="codefrag">commons-logging-1.1.1.jar</span>)</li>
        
<li>
<span class="codefrag">Apache Commons CLI</span> (<span class="codefrag">commons-cli-1.2.jar</span>)</li>
        
<li>
<span class="codefrag">Jackson Mapper</span> (<span class="codefrag">jackson-mapper-asl-1.4.2.jar</span>)</li>
        
<li>
<span class="codefrag">Jackson Core</span> (<span class="codefrag">jackson-core-asl-1.4.2.jar</span>)</li>
      
</ul>
<div class="note">
<div class="label">Note</div>
<div class="content">One simple way to run Rumen is to use '$HADOOP_HOME/bin/hadoop jar' 
              option  to run it.
      </div>
</div>
</div>

</div>
<!--+
    |end content
    +-->
<div class="clearboth">&nbsp;</div>
</div>
<div id="footer">
<!--+
    |start bottomstrip
    +-->
<div class="lastmodified">
<script type="text/javascript"><!--
document.write("Last Published: " + document.lastModified);
//  --></script>
</div>
<div class="copyright">
        Copyright &copy;
         2008 <a href="http://www.apache.org/licenses/">The Apache Software Foundation.</a>
</div>
<!--+
    |end bottomstrip
    +-->
</div>
</body>
</html>
